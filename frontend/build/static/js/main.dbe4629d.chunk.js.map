{"version":3,"sources":["services/dbService.js","App.js","index.js"],"names":["baseUrl","dbService","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","deleteObj","delete","console","log","Notification","message","flag","className","Filter","filterByName","handleFilterChange","value","onChange","Phonebook","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","Numbers","persons","deleteId","filter","person","name","toLowerCase","includes","map","ind","number","onClick","window","confirm","App","useState","setPersons","setNewName","setNewNumber","setFilterByName","setMessage","notifyFlag","setNotifyFlag","useEffect","responseData","notify","setTimeout","updateId","nameObj","confirmed","indexOf","res","concat","catch","error","event","target","preventDefault","personFound","find","undefined","alert","personName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dbe4629d.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () =>{\n\tconst request = axios.get(baseUrl)\n\treturn request.then(response => response.data)\n}\n\nconst create = newObject => {\n\tconst request = axios.post(baseUrl, newObject)\n\treturn request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n\tconst request = axios.put(`${baseUrl}/${id}`, newObject)\n\treturn request.then(response => response.data)\n}\n\nconst deleteObj = (id) => {\n\tconst request = axios.delete(`${baseUrl}/${id}`)\n \treturn request.then(response => {console.log('successful deletion')})\n}\n\nconst dbService = {getAll, create, update, deleteObj}\n\nexport default dbService ","import React, { useState, useEffect } from 'react'\nimport dbService from './services/dbService'\n\nconst Notification = ({message, flag}) => { //flag 0 -> error , 1-> success\n  if (message === null) {\n    return null\n  }\n\n  if(flag ===1){\n    return (\n      <div className=\"success\">\n        {message}\n      </div>\n    )\n  }\n  \n  else {\n   return (\n      <div className=\"error\">\n        {message}\n      </div>\n    ) \n  }\n}\n\nconst Filter = ({filterByName, handleFilterChange}) => {\n  return(\n    <div>\n      Filter shown with : <input value={filterByName} onChange={handleFilterChange}/>\n    </div>\n  )\n}\n\nconst Phonebook = ({addPerson, newName, newNumber, handleNameChange, handleNumberChange}) => {\n  return(\n    <div>\n      <h2>Add new</h2>\n        <form onSubmit={addPerson}>\n          <div>\n            name:\n            <input \n              value={newName}\n              onChange={handleNameChange}/>\n            number:\n            <input \n              value={newNumber}\n              onChange={handleNumberChange}/>\n          </div>\n          <div>\n            <button type=\"submit\">add</button>\n          </div>\n        </form>\n    </div>\n    )\n} \n\n\nconst Numbers = ({persons, deleteId, filterByName}) => {\n  return(\n    <div>\n      <h2>Numbers</h2>\n      <ul> {persons.filter( (person) => person.name.toLowerCase().includes(filterByName.toLowerCase())\n        ).map( (person, ind) => {\n          return(\n            <li key={person.name} >\n              {person.name} {person.number}\n              <button type='button' onClick={() => deleteId(person.id, window.confirm(`delete ${person.name}?`))}>delete</button>\n          </li>       \n          )})\n        }\n      </ul>\n    </div>\n  )\n}\n\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterByName, setFilterByName ] = useState('')\n  const [ message, setMessage] = useState(null)\n  const [notifyFlag, setNotifyFlag ] = useState(0);\n  \n  const hook = () => {\n    console.log('effect')\n    dbService\n      .getAll()\n      .then(responseData => {\n        console.log('promise fulfilled')\n        setPersons(responseData)\n      })\n  } \n\n  useEffect(hook, [])\n\n  const notify = (message, flag) =>{\n    setNotifyFlag(flag)\n    //console.log(notifyFlag)\n    setMessage(message)\n    setTimeout(() => setMessage(null) , 5000)\n  }\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameObj = {name: newName, number: newNumber}\n    let personFound = persons.find( person => person.name.toLowerCase() === newName.toLowerCase())\n    if(personFound!==undefined){    \n      console.log(newNumber, personFound)\n      if(newNumber === personFound.number) alert(`${newName} is already added to phonebook with same ph.number`);\n      else {\n        updateId(personFound.id, nameObj, window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`))\n        \n      }    \n    }\n    else {\n      dbService\n        .create(nameObj)\n        .then(responseData => {\n          setPersons(persons.concat(responseData))\n          console.log(responseData)\n          notify(`Added ${responseData.name}`, 1)\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          notify(error.response.data.error,0)\n          console.log(error.response.data.error)\n        })\n\n    }\n\n    setNewName('');\n    setNewNumber('');\n  }\n  const updateId = (id, nameObj, confirmed) => {\n    const personName = persons[persons.map(person => person.id).indexOf(id)].name\n    if (confirmed) {\n      dbService.update(id, nameObj)\n        .then(res => {\n          setPersons(persons.filter(person => person.id !== id).concat(nameObj))\n          notify(`Updated ${nameObj.name}'s number`, 1)\n        })\n        .catch(error => { \n          notify(error.response.data.error,0)\n        })\n    }\n  }\n\n  const deleteId = (id, confirmed) => {\n    const personName = persons[persons.map(person => person.id).indexOf(id)].name\n    if (confirmed) {\n      dbService.deleteObj(id)\n        .then(res => {\n          setPersons(persons.filter(person => person.id !== id))\n        })\n        .catch(error => { \n          notify(`${personName} was already removed`,0)\n          setPersons(persons.filter(person => person.id !== id))\n        })\n    }\n  }\n\n  const handleNameChange = (event) => setNewName(event.target.value);\n  \n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n  \n  const handleFilterChange = (event) => setFilterByName(event.target.value);\n\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message} flag={notifyFlag}/>\n      <Filter filterByName={filterByName} handleFilterChange={handleFilterChange}/>\n      <Phonebook \n        addPerson={addPerson} \n        newName={newName} \n        newNumber={newNumber} \n        handleNameChange={handleNameChange} \n        handleNumberChange={handleNumberChange}\n      />\n      <Numbers persons={persons} deleteId={deleteId} filterByName={filterByName}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}